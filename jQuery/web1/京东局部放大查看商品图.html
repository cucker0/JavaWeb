<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>京东局部放大查看商品图</title>
    <style type="text/css">
        body {
            margin: 0;
            padding: 0;
        }

        .w {
            margin: 0 auto;
            width: 100%;
        }
        .ww {
            margin: 0 auto;
            width: 1210px;
        }
        .titleNavBar {
            height: 30px;
            background: #e3e4e5;
        }
        .header {
            height: 211px;
            background: #bfa;
        }
        .navBar {
            height: 40px;
            background: #000;
        }
        .subNav {
            height: 45px;
            background: #f2f2f2;
            margin-bottom: 10px;
        }
        .preview-wrap {
            width: 452px;
            height: 740px;
            /*position: relative;*/
            float: left;
            /*background: #fba;*/
        }
        .preview {
            width: 450px;
            height: 450px;
            border: 1px solid #e3e4e5;
            /*background: url("./img/smallphone.jpg") no-repeat;*/
        }
        .jqZoomPup {
            width: 300px;
            height: 300px;
            background: #FEDE4F;
            border: 1px solid #e3e4e5;
            opacity: 0.5;
            position: relative;
            top: -452px;
            display: none;
            z-index: 3;
            /*float: left;*/
        }
        .zoomdiv {
            width: 540px;
            height: 540px;
            display: none;
            border: 1px solid #e3e4e5;
            /*position: absolute;*/
            /*top: 336px;*/
            /*left: 760px;*/
            position: relative;
            left: 451px;
            top:-452px;
        }
        .clearfix:before,
        .clearfix:after {
            display: table;
            content: "";
            clear: both;
        }

        .itemInfo-wrap {
            width: 736px;
            height: 500px;
            padding: 5px 0 0 20px;
            float: left;
            background: #bfa;
        }

    </style>
    <script src="./js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript">
        // DOM就绪后
        $(function () {
            zoomBackground();

            $(".preview")
                .mouseover(function (event) {
                    $(".jqZoomPup").add(".zoomdiv").show();
                })
                .mouseout(function (event) {
                    $(".jqZoomPup").add(".zoomdiv").hide();
                })
                .mousemove(function (event) {
                    // console.log(event);
                    /**
                     * preview 450px  小图
                     * jqZoomPup 300px  遮罩层
                     * zoomdiv 540px  大图
                     *
                     * 遮罩层向左、向右可移动的范围：[0, 150]
                     *      向上、向下可移动的范围：[0, 150]
                     * 大图移动距离 / 小图移动距离 = 540/450
                     *
                     * 遮罩层触碰小图四边：
                     *    x < 300/2  ,x 表示光标横向到左边，或右边的其中较小的距离
                     *    y < 300/2  ,y 表示光标横向到上边，或下边的其中较小距离
                     */
                    console.log(event.offsetX);
                    console.log(event.offsetY);
                    var proportion = 540/450; // 大图移动距离 / 小图移动距离 比例
                    var leftX = event.offsetX;
                    var rightX = 450 - event.offsetX;
                    var topY = event.offsetY;
                    var bottomY =  450 - event.offsetY;
                    // 大图要调整的x、y轴偏移量
                    var x, y;
                    // 遮罩层中心点距离x，y的边界值
                    var xBorder = 300 / 2;
                    var yBorder = 300 / 2;
                    if (leftX < xBorder) { // 遮罩层触碰小图左边
                        x = "left";
                    } else if (rightX < xBorder) { // 遮罩层触碰小图右边
                        x = "right";
                    } else {
                        x = -(event.offsetX - 150) * proportion + "px";
                    }
                    if (topY < yBorder) {
                        y = "top";
                    } else if (bottomY < yBorder) {
                        y = "bottom";
                    } else {
                        y = -(event.offsetY - 150) * proportion + "px";
                    }
                    var positions = x + " " + y;
                    console.log(positions);
                    $(".zoomdiv").css("background-position", positions);
                });
        });

        function zoomBackground() {
            $(".zoomdiv").css("background", "url(./img/bigphone.jpg) 0 0 no-repeat");
        }



    </script>
</head>
<body>
<div class="titleNavBar w"></div>
<div class="header ww">

</div>

<div class="navBar">
</div>

<div class="subNav">
</div>

<div class="container ww">
    <div class="product-intro clearfix">
        <div class="preview-wrap">
            <div class="preview">
                <img src="img/smallphone.jpg">
                <div class="jqZoomPup"></div>
            </div>
            <div class="zoomdiv"></div>
        </div>
        <div class="itemInfo-wrap">
            <div>vivo iQOO Neo 855竞速版 8GB+128GB电光薄荷 骁龙855Plus 33W超快闪充 4500mAh大电池游戏手机 全网通4G手机</div>
        </div>
    </div>
</div>

<div class="footer"></div>
</body>
</html>